<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <style>
        .label {
            font-size: medium;
            font-weight: bolder;
            margin-bottom: 3px;
        }
        h2{
            font-weight: bolder;
            text-align: center; 
        }
    </style>
</head>

<body>
    <h2>회원가입 페이지</h2>

    <p class="label">아이디</p>
    <input type="text" id="id" onblur="idCheck()" maxlength="20" placeholder="아이디" class="form-control">
    <p id="id-check-result" style="font-size: small;"></p>
    <p class="label">비밀번호</p>
    <input type="password" id="pw1" onblur="pwCheck()" placeholder="비밀번호" class="form-control">
    <p id="pw-check-result" style="font-size: small;"></p>
    <p class="label">비밀번호 재확인</p>
    <input type="password" id="pw2" onblur="pw2Check()" placeholder="비밀번호" class="form-control">
    <p id="pw2-check-result" style="font-size: small;"></p>

    <p class="label">이름</p>
    <input type="text" id="username" onblur="usernameCheck()" placeholder="이름" class="form-control">
    <p id="username-result" style="font-size: small;"></p>

    <p class="label">생년월일</p>
    <input type="text" id="year" placeholder="년(4자)">
    <input type="text" id="month" placeholder="월">
    <input type="text" id="day" placeholder="일">
    <p id="bday-result" style="font-size: small;"></p>

    <p class="label">성별</p>
    <select name="" id="gender" class="form-select" onblur="genderCheck()">
        <option selected value="n">성별</option>
        <option value="f">여자</option>
        <option value="m">남자</option>
        <option value="u">선택안함</option>
    </select>
    <p id="gender-result" style="font-size: small;"></p>

    <p class="label">본인 확인 이메일(선택)</p>
    <div class="input-group mb-3">
        <input type="text" id="userid" class="form-control" placeholder="선택입력">
        <span class="input-group-text">@</span>
        <input type="text" id="domain" placeholder="선택입력">
        <select name="domain" id="domainSelect" onchange="emailSelect()">
            <option value="">직접입력</option>
            <option value="naver.com">naver.com</option>
            <option value="gmail.com">gmail.com</option>
            <option value="yahoo.co.kr">yahoo.co.kr</option>
        </select>
    </div>

    <p class="label">휴대전화</p>
    <input type="text" id="mobile" onblur="mobileCheck()" placeholder="000-0000-0000" class="form-control">
    <p id="mobile-result" style="font-size: small;"></p>



</body>
<script>
    function idCheck() {
        let id = document.getElementById("id").value;
        let idCheckResult = document.getElementById("id-check-result");
        const exp = /^(?=.*[a-z])(?=.*[\d])[a-z\d-_]{5,20}$/

        if (id.length == 0) {
            idCheckResult.innerHTML = "필수 정보입니다.";
            idCheckResult.style.color = "red";
        } else if (id.match(exp)) {
            console.log("일치");
            idCheckResult.innerHTML = "멋진 아이디";
            idCheckResult.style.color = "green";
        } else {
            console.log("불일치");
            idCheckResult.innerHTML = "5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.";
            idCheckResult.style.color = "red";
        }
    }
    function pwCheck() {
        console.log("함수호출");
        let pw1 = document.getElementById("pw1").value;
        let pwCheckResult = document.getElementById("pw-check-result");
        const pwExp = /^(?=.*[a-z])(?=.*[\d])(?=.*[!$#-_])[A-Za-z\d!$#-_]{8,16}$/

        if (pw1.length == 0) {
            pwCheckResult.innerHTML = "필수 정보입니다.";
            pwCheckResult.style.color = "red";
        } else if (pw1.match(pwExp)) {
            console.log("일치");
            pwCheckResult.innerHTML = "사용가능한 비밀번호입니다.";
            pwCheckResult.style.color = "green";
        } else {
            console.log("불일치");
            pwCheckResult.innerHTML = "8~16자의 영문 소문자, 숫자, 특수기호(!,$,#,-,_)를 사용하세요.";
            pwCheckResult.style.color = "red";
        }
    }
    function pw2Check() {
        let pw1 = document.getElementById("pw1").value;
        let pw2 = document.getElementById("pw2").value;
        let pw2CheckResult = document.getElementById("pw2-check-result");

        if (pw2.length == 0) {
            pw2CheckResult.innerHTML = "필수 정보입니다.";
            pw2CheckResult.style.color = "red";
        } else if (pw1 == pw2) {
            pw2CheckResult.innerHTML = "비밀번호 확인";
            pw2CheckResult.style.color = "green";
        } else {
            pw2CheckResult.innerHTML = "비밀번호가 일치하지 않습니다.";
            pw2CheckResult.style.color = "red";
        }
    }
    function usernameCheck() {
        let username = document.getElementById("username").value;
        let usernameResult = document.getElementById("username-result");
        if (username.length == 0) {
            usernameResult.innerHTML = "필수 정보입니다.";
            usernameResult.style.color = "red";
        } else {
            usernameResult.innerHTML = "";
        }

    }
    function genderCheck() {
        let gender = document.getElementById("gender").value;
        let genderResult = document.getElementById("gender-result");
        if (gender == "n") {
            console.log("성별")
            genderResult.innerHTML = "필수 정보입니다.";
            genderResult.style.color = "red";
        } else {
            genderResult.innerHTML = "";
        }
    }

    function emailSelect() {
        console.log("함수호출");
        const domainResult = document.getElementById("domainSelect").value;
        const domain = document.getElementById("domain");
        domain.value = domainResult;
    }
    function mobileCheck(){
        let mobile = document.getElementById("mobile").value;
        let mobileResult = document.getElementById("mobile-result");
        const mobileExp = /^\d{3}-\d{4}-\d{4}$/ 
        if(mobile ==0 ){
            mobileResult.innerHTML ="필수 정보입니다.";
            mobileResult.style.color ="red";
        }else if(mobile.match(mobileExp)){
            mobileResult.innerHTML ="";
        }else{
            mobileResult.innerHTML="전화번호 형태를 확인해주세요.";
            mobileResult.style.color ="red";
        }
    }
</script>

</html>